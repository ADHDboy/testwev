# Default task watch and process changes from dev and blogging folders
default:
    tasks:
        - 'newer:coffee'
        - 'newer:concat'
        - 'newer:sass'
        - 'newer:jade'
        - 'newer:imagemin'
        - 'sync:fonts'
        - 'sync:js'
        - 'sync:livejs'
        - 'sync:css'
        - 'sync:html'
        - 'sync:helpers'
        - 'sync:ruby'
        - 'sync:data'
        - 'sync:publ'
        - 'shell:jekyllBuild'
        - 'watch:default'

# Process bower dependencies
bower-dev:
    tasks:
        - 'bower_concat'
        # - 'clean:bower'

# Rebuild project from scratch using dev and blogging folders
regen:
    tasks:
        - 'coffee'
        - 'concat'
        - 'sass'
        - 'jade'
        - 'newer:imagemin'
        - 'sync:fonts'
        - 'sync:js'
        - 'sync:livejs'
        - 'sync:css'
        - 'sync:html'
        - 'sync:helpers'
        - 'sync:ruby'
        - 'sync:data'
        - 'sync:publ'
        - 'shell:jekyllBuild'

# Task for theme style fixes (only styles or scripting).
# Run this task after regen task to update src paths for styles and scripts
theme:
    tasks:
        - 'newer:sass'
        - 'newer:coffee'
        - 'newer:concat'
        - 'sync:jekyllStyles'
        - 'sync:jekyllScripts'
        - 'watch:theme'

# Generate jekyll website and prepares it for deploy
build:
    tasks:
        - 'cmq'
        - 'autoprefixer'
        - 'uglify'
        - 'csso'
        - 'clean:debug'
        - 'shell:jekyllBuild'
        - 'processhtml'
        - 'htmlmin'

# Publishing task - copy posts, pages and their images to src folder
# for further regeneration
publish:
    tasks:
        - 'newer:imagemin'
        - 'sync:publ'
        - 'sync:data'
        - 'shell:jekyllBuild'
        - 'processhtml'
        - 'htmlmin'
        # - 'watch:publish'

# Deploy dev and build versions
deploy:
    tasks:
        - 'shell:rakeDeploy'

# Deploy only generated site
jekyll-deploy:
    tasks:
        - 'shell:rakeJekyllDeploy'
